## REP 重用/发布等效原则

> 重用的粒度是发布的粒度。

过去十年间，许多模块管理工具（例如Maven、Leiningen和RVM）应运而生。这些工具变得越来越重要，因为在这段时间里，已经创建了大量可重用的组件和组件库。我们现在正处于软件重用的时代——这是面向对象模型最古老的承诺之一的实现。

重用/发布等效原则（REP）是一项看似显而易见的原则，至少在事后看来是如此。想要重用软件组件的人不能也不会这样做，除非这些组件通过发布流程进行跟踪，并被赋予发布编号。

这不仅仅是因为如果没有发布编号，就没有办法确保所有重用的组件彼此兼容。更重要的是，这反映了软件开发人员需要知道新版本何时发布以及这些新版本将带来哪些变化。

开发人员常常会收到新版本发布的提示，然后根据该版本所做的更改决定继续使用旧版本。因此，发布流程必须生成适当的通知和发布文档，以便用户可以就何时以及是否集成新版本做出知情决策。

从软件设计和架构的角度来看，这个原则意味着被组合成组件的类和模块必须属于一个内聚的组。组件不能仅仅由一堆随意的类和模块组成，而是必须有一些总体主题或目的，这些模块都共享这个主题。

当然，这应该是显而易见的。然而，还有另一种看待这个问题的方式，这种方式可能并不是那么明显。被分组成组件的类和模块应该可以一起发布。它们共享相同的版本号和发布跟踪，并包含在同一份发布文档中，这对作者和用户来说都是有意义的。

这是一种非强制的建议：说某件事情“应该有意义”只是一种摆手示意，试图让自己听起来有权威性。这个建议很脆弱，因为很难精确地解释将类和模块组合成一个单一组件所需的粘合剂。尽管这个建议可能很脆弱，但它本身的原则非常重要，因为违反很容易被发现——它们“没有意义”。如果你违反了REP，你的用户会知道，并且他们不会对你的架构技能印象深刻。

这个原则的脆弱性被下面两个原则的强度所弥补。实际上，CCP和CRP以否定的方式强烈地定义了这个原则。